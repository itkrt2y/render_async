<div id="<%= container_name %>">
  <div id="<%= container_name %>_spinner" class="sk-spinner sk-spinner-double-bounce">
    <div class="sk-double-bounce1"></div>
    <div class="sk-double-bounce2"></div>
  </div>
</div>

<% content_for :render_async do %>
  <%= javascript_tag html_options do %>
    (function(){
      fetch('<%= path %>', { credentials: 'same-origin' })
        .then(function (response) {
          return response.text()
        }).then(function (html) {
          document.querySelector('#<%= container_name %>').innerHTML = html
        }).catch(function (error) {
          console.log(error)
        }).then(function () {
          var element = document.querySelector('#<%= container_name %>_spinner');
          if (element) {
            element.style.display = 'none'
          }
        })
    }());
  <% end %>
<% end %>
